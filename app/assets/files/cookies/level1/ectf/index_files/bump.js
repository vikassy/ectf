(function(){var i="http",d="emp.bbci.co.uk",b="",a={},f={emp:"iplayer",empRev:"",enableClear:false,clearRev:"",enableMobile:false,mobileRev:"",mobileDevice:false,tabletDevice:false,desktopDevice:false,tvDevice:false,touchDevice:false,appleDevice:false,logLevel:"none"},j=function(l){for(var k in l){if((typeof f[k]!=="undefined")&&(typeof a[k]==="undefined")){if(typeof f[k]==="boolean"){a[k]=(function(m){switch(m.toLowerCase()){case"true":case"1":return true;case"false":case"0":case"":case null:return false;default:return Boolean(m)}})(l[k].toString())}else{if(typeof f[k]==="number"){a[k]=parseInt(l[k]);if(isNaN(a[k])){a[k]=0}}else{a[k]=l[k]}}}}},g={none:0,error:10,warn:20,info:30,log:40,debug:50},e={},c="bbcBump";(function(){var o={},q=document.cookie.split(";");for(var n=0;n<q.length;n++){var r=q[n].replace(/^\s\s*/,"").replace(/\s\s*$/,"");if(r.indexOf(c)===0){r=r.substring(c.length,r.length);var p=r.split("="),m=p[0].charAt(0).toLowerCase()+p[0].slice(1),l=(p[1]||"");o[m]=l}}j(o)})();(function(){var l=document.getElementsByTagName("script"),t={};for(var r=0;r<l.length;r++){var n=l[r].getAttribute("src");if(n){var p=(n.match(/^[^\?\#]+/gi)[0]||"");var v=new RegExp("/emp/(releases/)?bump(/|/(embed|player|define)\\.js|/revisions/[^/]+/(embed|player|define)\\.js)?$","gi");if(p.match(v)){var k=new RegExp("^(http[s]{0,1})://([^\\?\\&#:/]+\\.bbc[i]{0,1}(\\.co\\.uk|\\.com))(:([0-9]+))?","gi");var s=(p.split(k)[1]||"");if(s.length>1){i=s}var w=(p.split(k)[2]||"");if(w.length>1){d=w}var m=(p.split(k)[5]||"");if(m.length>1){b=m}else{if(w.length>1){b=""}}var q=n.slice(n.indexOf("?")+1).replace(/&amp;/g,"&").split("&");for(var u=0;u<q.length;u++){var o=q[u].split("=");t[o[0]]=(o[1]||"")}}}}j(t)})();j(f);(function(){var l=(g[a.logLevel]||0);for(var k in g){if(k!=="none"){e[k]=(function(m){if((l>=g[m])&&window.console&&window.console[m]){return function(){var n=arguments;if(n[0]&&(typeof n[0]==="string")){n[0]="bump : "+n[0]}window.console[m].apply(window.console,n)}}return function(){}})(k)}}})();e.log("config",a);var h=window.embeddedMedia=(function(){if(typeof window.embeddedMedia==="object"){e.debug("window.embeddedMedia found - no need to create Stub");return window.embeddedMedia}e.debug("window.embeddedMedia NOT found - create Stub");var n=[],l=[],o="",m=(function(){var p=function(s){e.debug("Stub",arguments);this._delayedCalls=[];this._delayedCalls.stubAdded=true;for(var r=0,q=(s||[]).length;r<q;++r){(function(t,u){t[u]=function(){this.addDelayedCall(u,arguments)};t[u].stubAdded=true})(this,s[r])}};p.prototype={growInto:function(t){for(var s in t){if(!this.hasOwnProperty(s)||(this[s]&&this[s].stubAdded)){this[s]=t[s]}}for(var r=0,q=this._delayedCalls.length;r<q;++r){(function(v,w,u){e.debug("Stub.growInto : "+w,u);if(typeof w=="function"){w.apply(k,[v])}else{v[w].apply(v,u)}})(this,this._delayedCalls[r][0],this._delayedCalls[r][1])}delete this._delayedCalls;delete this.growInto},addDelayedCall:function(r,q){e.debug("Stub.addDelayedCall : "+r,q);this._delayedCalls.push([r,q])}};return p})();var k={};k.Player=function(q){m.call(this,["write","setBoilerPlateUrl","setFlashVersion","setWidth","setHeight","setPlaylist","setConfig","setMediator","setDomId","setId","setRevision","setWmode","setMessage","setAttr","setParam","setVar","setFlashvar","set","register","unregister","isEmbedded","isWritten","hasChanged"]);n.push(this);if(typeof q!=="undefined"){var p=(n.length-1);n[p].addDelayedCall("setDomId",new Array(q))}};k.Player.prototype=m.prototype;k.each=function(r){for(var q=0,p=n.length;q<p;++q){n[q].addDelayedCall(r)}};k.eachWrite=function(p){l.push(p)};k.writeAll=function(){for(var q=0,p=n.length;q<p;++q){n[q].addDelayedCall("write",arguments)}};k.setPopoutUrl=function(p){o=p};require(["demi-1"],function(p){p.getNetwork(function(B,H){var F=((!B)&&(typeof H==="object")&&(H.isMobile()===true)),s=a.enableClear,r=a.enableMobile,v=(a.mobileDevice||p.device.isMobile()),q=(a.tabletDevice||p.device.isTablet()||(/PlayBook/).test(navigator.userAgent)),D=(a.desktopDevice||p.device.isDesktop()),E=(a.tvDevice||p.device.isTV()),t=(a.touchDevice||p.device.hasStylus()||p.device.hasTouchscreen()||(/PlayBook/).test(navigator.userAgent)),w=(a.appleDevice||(/(iPod|iPad|iPhone)/).test(navigator.userAgent)),z=((typeof window.devicePixelRatio!=="undefined")&&(window.devicePixelRatio>=2)),A=function(I,M,J){var N=String(navigator.userAgent).match(/OS ([0-9]+)_([0-9]+)(_([0-9]+))?/),K,L;if(N===null){e.error("hasIosVersion("+I+", "+M+", "+J+") : could not discover iOS version");return false}K={major:(N[1]?Number(N[1]):0),minor:(N[2]?Number(N[2]):0),revision:(N[4]?Number(N[4]):0)};L=((K.major>I)?true:(K.major===I&&K.minor>M)?true:(K.major===I&&K.minor===M&&K.revision>=J)?true:false);e.debug("hasIosVersion("+I+", "+M+", "+J+") : "+String(L));return L},y=(function(){if(s&&w){return"clear"}else{if(r&&(v||q||t)){return"mobile"}else{return a.emp}}})(),x=(function(){if(y==="clear"){return a.clearRev}else{if(y==="mobile"){return a.mobileRev}else{return a.empRev}}})(),u=(function(){var I=(a.emp==="worldwide");if(w){if(I){if(F){return"journalism-http-3g"}else{if(q){return"journalism-http-tablet"}else{return"journalism-http-mobile"}}}else{if(v&&!A(4,2,2)&&!z){return"apple-iphone2-hls"}else{if(F){return"apple-iphone4-ipad-hls-3g"}else{if(q){return"apple-ipad-hls"}else{return"apple-iphone4-hls"}}}}}else{if(v||q||t){if(I){if(F){return"journalism-flash-3g"}else{if(q){return"journalism-flash-tablet"}else{return"journalism-flash-mobile"}}}else{if(F){return"android-phone-tablet-rtmp-3g"}else{if(v){return"android-phone-rtmp-high"}else{return"android-tablet-rtmp"}}}}else{if(I){return"journalism-pc"}else{return"pc"}}}})();var C=(function(){var I="";if(a.logLevel!=="none"){I+=(I.length?"&":"")+"logLevel="+a.logLevel}if(u){I+=(I.length?"&":"")+"mediaset="+u}return I})(),G=i+"://"+d+(b.length?":"+b:"")+"/emp/"+y+(x.length?"/revisions/"+x:"")+"/embed.js"+(C.length?"?"+C:"");e.info("emp : "+y);e.info("mediaset : "+u);e.info("embed script url : "+G);require([G],function(J){for(var I in k){if(typeof J[I]==="undefined"){e.debug("remove embeddedMedia['"+I+"']");k[I]=undefined;delete k[I]}}for(var I in J){if(typeof k[I]==="undefined"){e.debug("add embeddedMedia['"+I+"']")}else{e.debug("override embeddedMedia['"+I+"']")}k[I]=J[I]}e.debug("run Stub");for(var I in l){k.eachWrite(l[I])}if(o.length>0){k.setPopoutUrl(o)}for(var I in n){n[I].growInto(new k.Player())}e.debug("end Stub")})})});return k})();if(!window.bbc){window.bbc={}}if(!window.bbc.Emp){window.bbc.Emp=h.Player}})();