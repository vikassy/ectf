bbcdotcom.objects("bbcdotcom.mobilePrompt","create");bbcdotcom.mobilePrompt=function(c,e){var c=c,e=e||{},b=e.numerator||1,g=e.cookieName||"ckps_ww_app_prompt",f=e.denominator||1,d={ios:{appStoreUrl:"http://itunes.apple.com/app/bbc-news/id364147881?mt=8&uo=4"},android:{appStoreUrl:"market://details?id=bbc.mobile.news.ww"},silk:{appStoreUrl:"http://www.amazon.com/gp/product/B008M87GJK/ref=mas_pm_BBC_News_Kindle_Tablet_Edition"}},a=e.prompt||function(){return confirm("Would you like to download the free BBC News app?")};return{init:function(){if(this.userAgentStringIsMobileSafariOnIphone()&&this.surveyShouldBeShown()){this.displayPrompt(a,"ios")}if(this.userAgentStringIsAndroid()&&this.surveyShouldBeShown()){this.displayPrompt(a,"android")}if(this.userAgentStringIsSilk()&&this.surveyShouldBeShown()){this.displayPrompt(a,"silk")}},setUserAgentString:function(h){c=h},isSupportedOsVersion:function(){return c.search("CPU OS")==-1?false:true},userAgentStringIsMobileSafariOnIphone:function(){var h=c.search("Mobile/"),j=c.search("Safari/"),i=c.search("iPhone;");if(i==-1){i=c.search("iPod")}if(h!=-1&&j!=-1&&i!=-1){return true}else{return false}},userAgentStringIsAndroid:function(){var h=c.search("Android");return h!=-1},userAgentStringIsSilk:function(){var h=c.search("Silk");return h!=-1},surveyShouldBeShown:function(){if(b/Math.ceil(Math.random()*f)==1&&!this.cookiePresent()){return true}else{return false}},cookiePresent:function(){return this.readCookie(g)},createCookie:function(j,m,h,o,l,n){var i=[];if(h!==null&&h!==undefined){var k=new Date(new Date(new Date()).getTime()+h*3600000).toUTCString();i.push("; expires="+k)}if(o!==null&&o!==undefined){i.push("; path="+o)}if(l!==null&&l!==undefined){i.push("; domain="+l)}if(n!==null&&n!==undefined){i.push("; secure="+n)}return j+"="+m+i.join("")},deleteCookie:function(h,k,i,j){document.cookie=this.createCookie(h,"",-1,k,i,j)},readCookie:function(j){var l=j+"=",h=document.cookie.split(";"),k=0;for(k;k<h.length;k++){var m=h[k];while(m.charAt(0)==" "){m=m.substring(1,m.length)}if(m.indexOf(l)==0){return m.substring(l.length,m.length)}}return false},displayPrompt:function(j,i){document.cookie=this.createCookie(g,1,730);var h=j.apply();if(h==true){if("undefined"!==typeof scw){scw.trackExternalPageLinks(i+"-news|bbc:news:"+i+"-app-download-button")}window.location.assign(d[i].appStoreUrl)}}}};