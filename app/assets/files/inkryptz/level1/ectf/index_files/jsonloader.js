gloader.load(["glow","1","glow.net"],{onLoad:function(a){bbc.fmtj.utils.createObject("bbc.fmtj.net.json.model");bbc.fmtj.net.json.model=(function(){var j="http://cdnedge.bbc.co.uk";var l="bbcfmtj";var e=0;var m=[];var h=[];var g=[];return{registerRenderer:function(p){var o=p();if(this.getRenderer(o.id)){return;}g.push(o);var n=this.getModuleByRendererId(o.id);if(!n){return;}a.ready(function(){if(o.initialise){o.initialise(n.id);}if(n.config.getDataOnLoad===true){bbc.fmtj.net.json.model.getFeedByDataSource(n.config.dataSource).getData();}});},start:function(){for(var n in m){if(m.hasOwnProperty(n)){m[n].start();}}},stop:function(){for(var n in m){if(m.hasOwnProperty(n)){m[n].stop();}}},startFeedById:function(o){for(var n in m){if(m[n].id==o){m[n].start();}}},stopFeedById:function(o){for(var n in m){if(m[n].id==o){m[n].stop();}}},getData:function(q){var o=this.getFeedByDataSource(q);if(o._isUpdating){return;}o._isUpdating=true;var p="{url}{separator}{callbackName}={callbackFunction}&client={clientName}&cachebuster=cb{randomNumber}";var n={url:o.dataSource,separator:(o.dataSource.indexOf("?")>0?"&":"?"),callbackName:o.callbackName,callbackFunction:"bbc.fmtj.net.json.model.getFeedById("+o.id+").callback",randomNumber:[new Date().getTime(),parseInt(Math.random()*100000)].join(""),clientName:l};b(p,n);},getFeedByDataSource:function(o){for(var n in m){if(m[n].dataSource==o){return m[n];}}o=bbc.fmtj.utils.prefixUrl(o,j);for(var n in m){if(m[n].dataSource==o){return m[n];}}return null;},getFeedById:function(o){for(var n in m){if(m[n].id==o){return m[n];}}return null;},getFeedByModuleId:function(o){for(var n in m){var p=m[n];if(p.getModule(o)){return p;}}return null;},getFeedByRendererId:function(o){var n=this.getModuleByRendererId(o);if(!n){return null;}return this.getFeedByModuleId(n.id);},getModule:function(o){for(var n in h){if(h[n].id==o){return h[n];}}return null;},getModuleByRendererId:function(o){for(var n in h){if(h[n].renderer.id===o){return h[n];}}return null;},getRenderer:function(o){for(var n in g){if(g[n].id==o){return g[n];}}return null;},addModule:function(r){var q=r.renderer;var n=r.module||r.moduleObject;var p=r.feed||r.feedObject;if(q===null){alert("Renderer not specified");return;}if(n===null){alert("Module not specified");return;}if(p===null){alert("Feed not specified");return;}p.dataSource=bbc.fmtj.utils.prefixUrl(p.dataSource,j);c(q,n,p);},purgeJSONScriptTags:d};function d(r){var o=a.dom.get("script");var n=o.length;var q;for(var p=0;p<n;p++){q=a.dom.get(o[p]);if(q.attr("src")){if(q.attr("src").search(r)!=-1){q.remove();}}}}function c(q,r,o){r.getDataOnLoad=o.getDataOnLoad;r.dataSource=o.dataSource;var n={renderer:q,object:r,config:r,id:r.id};var p=k(o);if(!p){return;}p.registerModule(r.id);h.push(n);f(q);}function k(o){var n=bbc.fmtj.net.json.model.getFeedByDataSource(o.dataSource);if(n){if(n.getUpdatePeriod()>o.updatePeriod){n.setUpdatePeriod(o.updatePeriod);n.restart();}return n;}o.id=e++;var p=bbc.fmtj.net.json.feed.createFeed(o);if(!p){alert("Invalid feed specified");return;}if(!o.getDataOnLoad){p.start();}m.push(p);return p;}function f(q){if(bbc.fmtj.net.json.model.getRenderer(q.id)!==null){return;}if(typeof q.src=="function"){q.src();}else{var o=bbc.fmtj.utils.prefixUrl(q.src);var p="{url}{separator}cachebuster=cb{randomNumber}";var n={url:o,separator:(o.indexOf("?")>0?"&":"?"),randomNumber:[new Date().getTime(),parseInt(Math.random()*100000)].join("")};b(p,n);}}function b(p,n){var o=a.net.loadScript(a.lang.interpolate(p,n),{useCache:true});window.setTimeout(function(){o.destroy();d(n.url);},60000);}})();}});bbc.fmtj.utils.createObject("bbc.fmtj.net.json.feed");bbc.fmtj.net.json.feed=(function(){var c;gloader.load(["glow","1"],{onload:function(d){c=d;}});var a={isValid:function(d){return(this.isValidFeedId(d.id)&&this.isValidDataSource(d.dataSource)&&this.isValidUpdatePeriod(d.updatePeriod));},isValidUpdatePeriod:function(d){return this._isIntegerZeroOrGreater(d);},isValidDataSource:function(e){var d=c.lang.trim(e);return(d.indexOf("http://")===0||d.indexOf("/")===0);},isValidFeedId:function(d){return this._isIntegerZeroOrGreater(d);},_isIntegerZeroOrGreater:function(d){return(parseInt(d,10)===d&&0<=d);}};return{createFeed:function(d){if(!a.isValid(d)){return null;}return{id:d.id,dataSource:d.dataSource,callbackName:(d.callbackName?d.callbackName:"jsoncallback"),_updateTimer:null,_callbackTimeoutTimer:null,_updatePeriod:d.updatePeriod*1000,_lastUpdated:null,_isUpdating:false,_isPaused:false,_moduleIds:[],setUpdatePeriod:function(e){if(a.isValidUpdatePeriod(e)){this._updatePeriod=parseInt(e)*1000;}},getUpdatePeriod:function(){return(this._updatePeriod/1000);},getData:function(){this.createCallbackTimeoutTimer(d.id);bbc.fmtj.net.json.model.getData(this.dataSource);},createUpdateTimer:function(){if(this._isUpdating||this._isPaused||!this._updatePeriod){return;}var e=this;this._updateTimer=setTimeout(function(){e.getData();},this._updatePeriod);},clearUpdateTimer:function(){clearTimeout(this._updateTimer);this._updateTimer=null;this._isUpdating=false;},start:function(){this._isPaused=false;this.createUpdateTimer();},stop:function(){this.clearUpdateTimer();this._isPaused=true;},restart:function(){this.stop();this.start();},stopPolling:function(){this.stop();},createCallbackTimeoutTimer:function(f){var e=this;this._callbackTimeoutTimer=setTimeout(function(){e.callbackTimeout(f);},30000);},clearCallbackTimeoutTimer:function(){clearTimeout(this._callbackTimeoutTimer);this._callbackTimeoutTimer=null;},callbackTimeout:function(){if(this._isUpdating){this._isUpdating=false;this.createUpdateTimer();}},callback:function(g){this.clearCallbackTimeoutTimer();for(var f=0;f<this._moduleIds.length;f++){var e=bbc.fmtj.net.json.model.getModule(this._moduleIds[f]);var h=bbc.fmtj.net.json.model.getRenderer(e.renderer.id);h._hasUpdated=false;h.render(e.id,g);h.renderComplete(this.id);}this._isUpdating=false;this._lastUpdated=new Date();b(g,this);this.createUpdateTimer();},registerModule:function(e){if(this.getModule(e)===null){this._moduleIds.push(e);}},getModule:function(f){for(var e in this._moduleIds){if(f===this._moduleIds[e]){return this._moduleIds[e];}}return null;}};}};function b(e,g){var h={};if(e.bbcfmtj&&e.bbcfmtj.config){h=e.bbcfmtj.config;}else{if(e.config){h=e.config;}}var f={};if(e["@feed"]&&e["@feed"].bbcfmtj){f=e["@feed"].bbcfmtj;}var d=c.lang.apply(c.lang.clone(f),h);if(d.stopAllPolling===true){bbc.fmtj.net.json.model.stop();}if(d.eventComplete===true){g._isPaused=true;}if(d.globalRefreshRate&&(d.globalRefreshRate!="(none)")){g.setUpdatePeriod(d.globalRefreshRate);}else{if(d.refreshRate){g.setUpdatePeriod(d.refreshRate);}}}})();gloader.load(["glow","1","glow.anim","glow.dom","glow.tweens","glow.events"],{onLoad:function(a){bbc.fmtj.utils.createObject("bbc.fmtj.net.json.renderer");bbc.fmtj.net.json.renderer=(function(){return{createRendererBase:function(b){return{id:b,_hasUpdated:false,_utils:null,_json:null,renderComplete:function(){this._hasUpdated=false;},_updateDetail:function(f){var c=f.selector;var e=f.value;var d=f.effect;if(e!==null&&a.dom.get(c).length>0){if(a.dom.get(c).html()!=e){a.dom.get(c).html(e);if(typeof d=="function"){d(c);}this._hasUpdated=true;}}},_appendDetail:function(f){var c=f.selector;var e=f.value;var d=f.effect;if(e!==null&&a.dom.get(c).length>0){if(a.dom.get(c).html()!=e){a.dom.get(c).append(e);if(typeof d=="function"){d(c);}this._hasUpdated=true;}}},getJSONValue:function(c,d){var e=this.checkJSONPropertyExists(c);if(e!==null){}else{if(arguments.length>1){e=d;}else{e="";}}return e;},checkJSONPropertyExists:function(g){var d=true;var f=g.split(".");var k=this._json;for(i=0;i<f.length;i++){var c=f[i].indexOf("[");if(c>0){var e=/\[([0-9]*)\]/;var j=f[i].substr(0,c);var h=e.exec(f[i])[1];k=k[j];k=k[h];}else{k=k[f[i]];}d=(typeof k!="undefined");if(!d){return null;}}return k;},calculateAwayPercentage:function(d){var e=this.getJSONValue(d);var c=100-(e);return c;},calculatePercentageBar:function(c,g){var f=parseInt(c,10);var e=parseInt(g,10);var d;if(f==0&&e==0){d=50;}else{d=(f/(f+e))*100;}return d;},_updateStatsBar:function(d){var e=d.bar1Name;var c=d.bar1Percent;var l=d.effect;var k=a.dom.get(e).parent().width();var h=Math.round(c/100*k);var g=a.dom.get(e).width();var f=g-1;var j=g+1;if(h<f||h>j){this._hasUpdated=true;if(typeof l=="function"){l(e,h);}}},updatePlayer:function(e,c){var d="#"+c+"Player"+e.number;var f="";if(e.yellowCard){f+=YELLOW_CARD;}if(e.redCard){f+=RED_CARD;}a.dom.get(d+"Cards").html(f);},highlightRed:function(c){var e=a.dom.get(c);var d=e.attr("fmtjOriginalColor");if(d===null){d=a.dom.get(c).css("color");e.attr("fmtjOriginalColor",d);}a.anim.css(e,5,{color:{from:"#CC0000",to:d}}).start();},moveStatusBar:function(c,d){a.anim.css(c,2,{width:{to:d}},{tween:a.tweens.easeBoth(2)}).start();},loader:function(d,c){a.dom.get(d).append('<img id=/"loader/" src=/"http://newsimg.bbc.co.uk/sol/shared/img/v4/icons/loading.gif"></img>');setTimeout(function(){a.dom.get(".loader").remove();},c);},_itemRendererDisplayLoading:function(c,e,d){var f=function(){d.get("li").removeClass("first");c.addClass("first");c.css("display","block").css("height","0px");a.anim.css(c,0.5,{height:{to:"28px"}},{tween:a.tweens.easeOut()}).start();var g=c.css("background-color");c.append('<div class="updating" style="padding: 4px 0px 0 5px; background-image:url(\'http://newsimg.bbc.co.uk/sol/shared/img/v4/icons/loading.gif\');background-repeat: no-repeat;background-position:75px 90%;"><strong style="background-color:'+g+'">Updating </strong></div>');a.anim.css(c.get(".updating"),1,{opacity:{to:1}}).start();};return f;},_itemRendererDisplayNewData:function(c,d){var e=function(){var k=c;var j=c.get("div");j.html(d);j.css("opacity",0).css("zoom",1)[0];var h=k[0].style.height;var f=k.css("visibility","hidden").css("position","relative").css("height","auto")[0].offsetHeight;k.css("visibility","").css("position","").css("height",h);var g=a.anim.css(c,0.5,{height:{to:f}},{tween:a.tweens.easeOut()});a.events.addListener(g,"complete",function(){k.css("height",f);a.anim.css(c,0.5,{"background-color":{from:"#EFEFEF",to:"#FFFFFF"}}).start();j.css("background-color","#fff");});g.start();};return e;},_itemRendererFadeInText:function(c,e){var d=function(){var g=c.get("div");g.css("background-color","#fff");var f=a.anim.css(g,0.5,{opacity:{to:1}}).start();a.events.addListener(f,"complete",function(){c.html(e);c.removeAttr("style");});};return d;},_itemRendererRemoveLoading:function(c,d){var e=function(){var f=c.get(".updating");a.anim.css(f,0.5,{opacity:{to:0}}).start();f.remove();};return e;},createAnim:function(e){var f=e.selector;var g=e.commentHtml;var d=e.effects;var j=[];var c=e.container;for(var k in d){if(d.hasOwnProperty(k)){var l=d[k];if(typeof l.name=="function"){var h=l.name(f,g,c);j.push(h);j.push(l.duration);}}}return j;},getFullHeight:function(e){var d=e[0].style.height;var c=e.css("visibility","hidden").css("position","absolute").css("height","auto")[0].offsetHeight;e.css("visibility","").css("position","").css("height",d);return c;},matchStatusLookup:function(c){var e="";var d="";switch(c){case"LIVE":e="L";d="Live";break;case"RESULT":e="R";d="Result";break;case"HALFTIME":e="HT";d="Half Time";break;case"FULLTIME":e="FT";d="Full Time";break;case"EXTRATIME":e="ET";d="Extra Time";break;case"EXTRATIMEHALFTIME":e="ETH";d="Extra Time Half Time";break;case"EXTRATIMEFULLTIME":e="ETF";d="Extra Time Full Time";break;case"FIXTURE":e="F";d="Fixture";}return{shortText:e,fullText:d};}};}};})();bbc.fmtj.net.json.isReady=true;bbc.fmtj.queue.callback("bbc.fmtj.net.json.model.addModule");}});