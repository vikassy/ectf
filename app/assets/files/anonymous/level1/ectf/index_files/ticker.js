gloader.load(["glow","1","glow.dom","glow.events","glow.anim"],{onLoad:function(a){bbc.fmtj.utils.createObject("bbc.fmtj.apps.ticker.renderers");bbc.fmtj.apps.ticker.renderers.DefaultRenderer=function(e){var n=e;var t;var h;var c;var u="DefaultRenderer";var w="ticker_title";var r="ticker_content";var b="ticker_content_anchor";var g="title_container";var j="media_type";var d="ticker_live";var o=false;var i;var x;var v;function l(z,A,y){t=z;t.startCommand=A;t.stopCommand=y;}function m(y){h=y;}function q(){return u;}function p(E,z){c=E;c.html("");var D=a.dom.create("<div>");D.addClass(g);var A=a.dom.create("<h4/>");A.addClass(w);A.html(z.title+":");var C=a.dom.create("<p/>");C.addClass(r);D.append(A);var B;if(z.mediaType!==undefined&&z.mediaType!==""){B=a.dom.create("<span>");B.addClass(j);B.addClass(z.mediaType);if(z.isLive==="true"){B.addClass(d);C.addClass("has-icon-ticker_live");B.html(" live");}else{C.addClass("has-icon-"+z.mediaType);B.html(" "+z.mediaType);}}if(z.url!==undefined&&z.url!==""){var y=a.dom.create("<a/>");y.attr("href",z.url);y.html(z.content);y.addClass(b);if(B!==undefined){y.append(B);}C.append(y);}else{C.html(z.content);if(B!==undefined){C.append(B);}}E.append(D);E.append(C);x=a.events.addListener(C,"mouseover",function(){if(h!==undefined&&h()===t.startCommand){t(t.stopCommand);o=false;}else{o=true;}});v=a.events.addListener(C,"mouseout",function(){if(o==false){t(t.startCommand);}});}function f(z){var D=c.get("."+g);D.css("opacity","0");var B=c.get("."+r);var A=a.anim.css(D,0.6,{opacity:{from:0,to:1}},{destroyOnComplete:true});a.events.addListener(A,"complete",function(){if(a.env.ie<=7){a.dom.get(D)[0].style.removeAttribute("filter");}c.get("."+j).css("visibility","visible");});var y=a.anim.css(B,0.6,{opacity:{from:0,to:1}},{destroyOnComplete:true});a.events.addListener(y,"complete",function(){if(a.env.ie<=7){a.dom.get(B)[0].style.removeAttribute("filter");}});var C=new a.anim.Timeline([[A],[y]],{destroyOnComplete:true});i=a.events.addListener(C,"complete",function(){if(z!==undefined){z();}});C.start();}function s(y){a.events.removeListener(x);a.events.removeListener(v);x=undefined;v=undefined;var A=c.get("."+r," ."+g);var z=a.anim.css(A,0.6,{opacity:{from:1,to:0}},{destroyOnComplete:true});return z;}function k(){if(i!==undefined){a.events.removeListener(i);i=undefined;}c.get("."+j).css("visibility","visible");}return{setStartStopHandler:l,setTickerStateListener:m,toString:q,initialise:p,start:f,transition:s,complete:k};};bbc.fmtj.apps.ticker.renderers.WarningRenderer=function(e){var o=e;var w;var c;var y;var f=false;var t=false;var s="in_sequence";var x="WarningRenderer";var A="ticker_title";var u="ticker_content";var b="ticker_content_anchor";var h="title_container";var k="media_type";var d="ticker_live";var i="bg_bar";var p=false;var j;var B;var z;function m(D,E,C){w=D;w.startCommand=E;w.stopCommand=C;}function n(C){_tickerStateListener=C;}function r(){return x;}function q(I,K){c=I;f=false;if(K.isSingleton!==undefined&&K.isSingleton===true){t=true;}else{t=false;}if(I.get("."+s).length>0){f=true;}I.html("");var G=a.dom.create("<span>");G.addClass(s);var H=a.dom.create("<div>");H.addClass(h);var J=a.dom.create("<h4/>");J.addClass(A);J.html(K.title+":");H.append(J);var D=a.dom.create("<p/>");D.addClass(u);var C;if(K.mediaType!==undefined&&K.mediaType!==""){C=a.dom.create("<span>");C.addClass(k);C.addClass(K.mediaType);if(K.isLive==="true"){C.addClass(d);D.addClass("has-icon-ticker_live");C.html(" live");}else{D.addClass("has-icon-"+K.mediaType);C.html(" "+K.mediaType);}}if(K.url!==undefined&&K.url!==""){var E=a.dom.create("<a/>");E.attr("href",K.url);E.html(K.content);E.addClass(b);if(C!==undefined){E.append(C);}D.append(E);}else{D.html(K.content);if(C!==undefined){D.append(C);}}I.append(H);I.append(D);I.append(G);var F=a.dom.create("<div/>");F.addClass(i);F.html("&nbsp;");F.css("top",-c.height());I.append(F);if(f===true){F.css("top","0px");}B=a.events.addListener(D,"mouseover",function(){if(_tickerStateListener!==undefined&&_tickerStateListener()===w.startCommand){w(w.stopCommand);p=false;}else{p=true;}});z=a.events.addListener(D,"mouseout",function(){if(p==false){w(w.startCommand);}});}function g(D){var I=c.get("."+h);I.css("opacity","0");var F=c.get("."+u);F.css("opacity","0");var E=a.anim.css(I,0.6,{opacity:{from:0,to:1}},{destroyOnComplete:true});a.events.addListener(E,"complete",function(){if(a.env.ie<=7){a.dom.get(I)[0].style.removeAttribute("filter");}});var C=a.anim.css(F,0.6,{opacity:{from:0,to:1}},{destroyOnComplete:true});a.events.addListener(C,"complete",function(){if(a.env.ie<=7){a.dom.get(F)[0].style.removeAttribute("filter");}});var H=new a.anim.Timeline([[E],[C]],{destroyOnComplete:true});j=a.events.addListener(H,"complete",function(){if(D!==undefined){D();}});if(f===true){f=false;F.css("visibility","visible");H.start();}else{var G=c.get("."+i);y=a.anim.css(G,0.6,{top:{from:-c.height(),to:"0px"}},{destroyOnComplete:true});a.events.addListener(y,"complete",function(){F.css("visibility","visible");H.start();});y.start();}}function v(D){a.events.removeListener(B);a.events.removeListener(z);B=undefined;z=undefined;var G;if(this.toString()!==D.toString()){var H=c.get("."+i);var C=a.anim.css(H,0.3,{top:{from:"0px",to:-c.height()}},{destroyOnComplete:true});var F=c.get("."+u," ."+h);var E=a.anim.css(F,0.6,{opacity:{from:1,to:0}},{destroyOnComplete:true});E.start();G=new a.anim.Timeline([E,C],{destroyOnComplete:true});}return G;}function l(){if(j!==undefined){a.events.removeListener(j);j=undefined;}var C=c.get("."+i);c.get("."+h).css("opacity","1");C.css("top","0px");c.get("."+u).css("visibility","visible");}return{setStartStopHandler:m,setTickerStateListener:n,toString:r,initialise:q,start:g,transition:v,complete:l};};}});gloader.load(["glow","1","glow.dom","glow.events"],{onLoad:function(a){bbc.fmtj.utils.createObject("bbc.fmtj.apps.ticker.Controller");bbc.fmtj.apps.ticker.Controller=(function(s){var G="ticker_container";var z="stopped";var A="started";var t="start_stop";var x="prev";var p="next";var e="renderer_output";var i="ticker_controls";var C=s;var f=a.dom.get(C.containerElementId);var y;var l=A;var D=0;var E;var c;var B;var F=-1;var u=false;function o(K,J){if(K===undefined||J===undefined){return false;}var H=0;var I=0;for(var L in K){H++;if(K[L]!==J[L]){return false;}}for(var L in J){I++;}if(H!=I){return false;}return true;}function q(){var H=a.dom.create("<div/>");H.addClass(G);var I=a.dom.create("<div/>");I.addClass(e);H.append(I);f.append(H);}function j(H){for(messageClass in H){if(H[messageClass].setStartStopHandler!==undefined){H[messageClass].setStartStopHandler(m,A,z);}if(H[messageClass].setTickerStateListener!==undefined){H[messageClass].setTickerStateListener(n);}}}function r(I,H,O){var K=f.get("."+G);var P=f.get("."+i);if(P.length===0){P=a.dom.create("<ul/>");P.addClass(i);K.append(P);var L=a.dom.create("<div/>");L.addClass("spacer");K.append(L);}var J=a.dom.create("<li/>");var M=a.dom.create("<a/>");J.attr("title",O);M.addClass(I+"_anchor").attr("href","#"+f.attr("id"));var N=a.dom.create("<span/>").text(O);P.append(J);J.append(M);J.addClass(I);M.append(N);a.events.addListener(J,"click",H);a.events.addListener(J,"mouseover",function(){var R=f.get("."+i);var Q=R.get("."+I);if(I===t){Q.removeClass(A+"_over");Q.removeClass(z+"_over");Q.addClass(n()+"_over");}else{Q.addClass(I+"_over");}});a.events.addListener(J,"mouseout",function(){var R=f.get("."+i);var Q=R.get("."+I);if(I===t){Q.removeClass(A+"_over");Q.removeClass(z+"_over");}else{Q.removeClass(I+"_over");}});}function h(I){if(o(I,c)===false){c=I;if(B!==undefined){a.events.removeListener(B);B=null;}var H=C.renderers[I.messageClass];var J;if(y!==undefined&&l!==z&&y.transition!==undefined){J=y.transition(H);}if(J!==undefined){B=a.events.addListener(J,"complete",function(){y=H;k(I);});J.start();}else{y=H;k(I);}if(I.isSingleton!==undefined&&I.isSingleton===true){f.get("."+i).css("visibility","hidden");}else{f.get("."+i).css("visibility","visible");}}else{v(C.refreshRateSecs);}}function k(J){if(y!==undefined){var I=f.get("."+e);y.initialise(I,J);f.attr("class",J.messageClass);if(l===A){var H=f.get("."+i);y.start(function(){v(C.refreshRateSecs);});}else{if(y.complete!==undefined){y.complete();}}}}function m(H){if(l!==H){var I=f.get("."+t);switch(H){case z:window.clearTimeout(E);E=null;y.complete();I.removeClass(A).addClass(z);I.get("a span").text("Play ticker");I.attr("title","Play ticker");break;case A:v(1);I.removeClass(z).addClass(A);I.get("a span").text("Pause ticker");I.attr("title","Pause ticker");break;default:break;}l=H;}}function n(){return l;}function b(){r(t,function(){var H=f.get("."+t);if(l===A){m(z);H.removeClass(A+"_over");}else{m(A);H.removeClass(z+"_over");}H.addClass(n()+"_over");return false;},"Pause ticker");r(x,function(){m(z);g();return false;},"Previous item");r(p,function(){m(z);w();return false;},"Next item");f.get("."+t).addClass(A);}j(C.renderers);var d=0;E=setInterval(function(){if(C.messageContainer.messages.length>0){window.clearInterval(E);w();}else{if(d<(C.refreshRateSecs*10)){d++;}else{v(C.refreshRateSecs);}}},100);function v(H){window.clearTimeout(E);E=setTimeout(function(){w();},H*1000);}function g(){F=C.messageContainer.messages[F-1]?F-1:C.messageContainer.messages.length-1;h(C.messageContainer.messages[F]);}function w(){if(C.messageContainer.messages.length>0){f.css("display","block");if(u===false){q();b();u=true;}F=C.messageContainer.messages[F+1]?F+1:0;h(C.messageContainer.messages[F]);}else{f.css("display","none");v(C.refreshRateSecs);}}return{TICKER_ELEMENT_CLASS:G,RENDERER_OUTPUT_ELEMENT_CLASS:e,START_STOP_CONTROL_ELEMENT_CLASS:t,PLAY_STATE_PLAYING:A,PLAY_STATE_STOPPED:z,setState:m,getState:n,addControl:r,setMessage:h};});}});bbc.fmtj.utils.createObject("bbc.fmtj.apps.ticker");bbc.fmtj.apps.ticker.initialise=function(a){a();};bbc.fmtj.apps.ticker.isReady=true;bbc.fmtj.queue.callback("bbc.fmtj.apps.ticker.initialise");