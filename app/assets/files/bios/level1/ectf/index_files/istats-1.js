define("istats-1",[],function(){var i={},B=i,H,j="sa_labels",V="istats-notrack",o="_istats_"+Math.random(),W={internal:true,external:true,download:true,clickthrough:true,promoimage:true},C={type:"",url:""},f=2000,b=10000,m=500,S,D={ignore:/.+\.(jpe?g|gif|png)$/i,webUrl:/^(\.\.?\/|\/|https?:\/\/|[^\/.:]+([\/.]|$))/i,pseudoProtocol:/^(mailto:|javascript:|about:|view-source:|data:)/i,internalUrl:/^(?:\/\/|https?:\/\/)?(?:[^.]+\.)*(bbc(?:\.co\.uk|\.com)|doubleclick\.net)(:|\/|$)/i,downloadUrl:/.+\.(pdf|te?xt|rtf|docx?|xlsx?|pptx?|od[tpsgbf]|mp[234]|m4a|mpeg|exe|dmg|zip|tgz)$/i,relativeUrl:/^(\.\.?\/|\/[^\/]|([^\/.:]+([\/.]|$)))/i,clickThrough:/^#sa-(.*?)(?:-sa(.*))?$/,hashLabels:/^ct_|ns_(fee|campaign|linkname|mchannel|source)=(.+?)$/,domain:/(bbc(?:\.co\.uk|\.com))$/i},X={},e={types:{"trackingfail.istats":true,"trackingsuccess.istats":true,"redirect.istats":true,"cookiecreated.istats":true}},n={},E={},d=[],a=function(){var p={};for(var q in e.types){p[q]=[]}return p},k=c(j);P(window);if(k!==null){(L())._linkTracked=true}if(Z()){F()}T(j);function P(p){(typeof p.istats==="undefined")&&(p.istats={});(typeof p.istats.enabled==="undefined")&&(p.istats.enabled=true);return p}function L(p){return p?P(p).istats:window.istats}i.getConfig=L;function K(){if(typeof k==="string"){C.type="internal";return k}}function N(q){if(history.replaceState){var p=location.protocol+"//"+location.host+(location.pathname?location.pathname:"");history.replaceState({},"",p+q)}else{location.hash=q}}function A(p){p||(p=location.hash);if(p!==""){var t=p.match(D.clickThrough),r,s="",u=[];if(t===null){return }if(t[2]){s="#"+t[2]}N(s);r=t[1];if(r===""){return }C.type="click through";u=r.split("&");for(var q in u){if(u.hasOwnProperty(q)&&!D.hashLabels.test(u[q])){u[q]="ct_"+u[q]}}r=u.join("&");return r}}function Z(){var q=true,r=true,p=(L()).enabled;if(window.bbcFlagpoles_istats){r=!(window.bbcFlagpoles_istats==="ON")}if(r||!p){q=false}else{F()}return q}function F(){if(!H&&typeof istatsTrackingUrl!=="undefined"){H=istatsTrackingUrl;H+="&ns_ti="+escape(document.title);H+="&ns_c="+(document.characterSet?document.characterSet:document.defaultCharset)}return H}i._setTrackingServiceUrl=F;i._getTrackingServiceUrl=function(){return H};i.setCountername=function(p){H=H.replace(/([\?&]name=)[^&]*/ig,"$1"+p)};i.getCountername=function(){var p=H.match(/[\?&]name=([^&]*)/i);if(p){return p[1]}};function g(q,p){if(!q.className){return false}return(" "+q.className+" ").indexOf(" "+p+" ")===-1?false:true}function U(r,q){var p=(r.className)?r.className+" ":"";if(!g(r,q)){r.className=p+q}}function M(s,q){var p=s.className.split(" "),t=[],r=p.length;while(r--){if(p[r]!==q){t.unshift(p[r])}}s.className=(t.length)?t.join(" "):""}i.track=function(p,s){if(!Z()){return }if(!W[p]){throw ('Given linkType, "'+p+'" is not valid.')}s=s||{};if(!s.region){s.region=[document.body]}if(typeof s.region.push==="undefined"){s.region=[s.region]}var r=s.region.length;while(r--){var t=s.region[r];I(t,p);var q=t[o];q.linkTypesTracked[p]=(s||{});if(!q.trackerAttached){(function(u){X.attach(u,"click",function(v){E.dispatch(u,v)})})(t);q.trackerAttached=true}}};i.observe=function(p,r,s){if(!e.types[r]){throw ('Cannot observe: Given eventType, "'+r+'" in unknown.')}if(typeof p.push==="undefined"){p=[p]}var q=p.length;while(q--){I(p[q]);d[p[q][o].eventsKey][r].push(s)}};i._isInternal=function(p){return i._isWebUrl(p)&&(D.relativeUrl.test(p)||D.internalUrl.test(p))};i._isExternal=function(p){return i._isWebUrl(p)&&!B._isInternal(p)};i._isDownload=function(p){return D.webUrl.test(p)&&D.downloadUrl.test(p)};i._isWebUrl=function(p){return D.webUrl.test(p)&&!D.ignore.test(p)&&!D.pseudoProtocol.test(p)};i._getDomainFromHost=Y;function Y(p){var q=p.match(D.domain);return q?q[1]:p}i._getLabelsFromHashString=A;i._createCookie=h;i._inspectTracking=function(p){if(typeof p!=="undefined"){C=p}return C};i.log=function(r,q,u,v){var p="",t;if(!Z()){return }q=encodeURIComponent(q);r=encodeURIComponent(r);for(var s in u){p+="&"+encodeURIComponent(s)+"="+encodeURIComponent(u[s])}if(r.toLowerCase()==="pageview"){i.setCountername(q);t=H}else{t=H+"&ns_type=hidden&action_type="+r+"&action_name="+q}t+=p;C.type="logging actions";R(t,v)};i.addNoTrack=function(p){U(p,V)};i.removeNoTrack=function(p){M(p,V)};e.notify=function(t,r,u){var p=d[t[o].eventsKey][r];for(var q=0,s=p.length;q<s;q++){if(typeof p[q]==="function"){if(p[q](u)===false){return false}}}};X.attach=function(p,r,q){if(p.addEventListener){p.addEventListener(r,q,false)}else{if(p.attachEvent){p.attachEvent("on"+r,q)}else{p["on"+r]=q}}};X.detach=function(p,r,q){if(p.removeEventListener){p.removeEventListener(r,q,false)}else{if(p.detachEvent){p.detachEvent("on"+r,q)}else{p["on"+r]=null}}};X.getTarget=function(p){p=p||window.event;return p.target||p.srcElement};function J(q,p){var r=q;do{if(r.nodeName=="A"){return r}if(r===p){return false}}while(r=r.parentNode)}function l(p){if(!B._isWebUrl(p)){return }if(B._isExternal(p)){return"external"}else{if(B._isDownload(p)){return"download"}else{if(B._isInternal(p)){return"internal"}}}}function O(t,q,s,p,r){t.istats={linkType:q,linkTrackerUrl:s,linkLocation:p,linkElement:r}}E.dispatch=function(w,v){var q=J(X.getTarget(v),this),p,r,t,s,u;if(!q||!q.href){return }s=new Date().getTime();u=(q.istatsTimestamp&&(s-q.istatsTimestamp)<m);if(u||g(q,V)){return }p=l(q.href);r=E[p];t=w[o].linkTypesTracked[p];if(!p||!r||!t){return }q.istatsTimestamp=s;v.istats=v.istats||{};E[p](w,q,v)};E.external=function(q,w,v){var p=q[o].linkTypesTracked.external||{},u=encodeURIComponent(w.href)||"",x=w.id?"&extlink_id="+encodeURIComponent(w.id):"",t=w.linktrack?"&"+w.linktrack:"",r=p.linkLocation?"&link_location="+encodeURIComponent(p.linkLocation):"",s=H+"&ns_type=hidden&action_type=extlink&extlink_url="+u+x+t+r;C.type="external";O(v,"external",s,p.linkLocation,w);Q(s,q,w,v)};E.download=function(w,s,u){var r=w[o].linkTypesTracked.download||{},t=encodeURIComponent(s.href)||"",v=s.id?"&download_id="+encodeURIComponent(s.id):"",p=r.linkLocation?"&link_location="+encodeURIComponent(r.linkLocation):"",q=H+"&ns_type=hidden&action_type=download&download_url="+t+v+p;C.type="download";O(u,"download",q,r.linkLocation,s);Q(q,w,s,u)};E.internal=function(s,x,w){var p=s[o].linkTypesTracked.internal||{},t="intlink_from_url="+encodeURIComponent(location.href),u="&intlink_ts="+new Date().getTime(),y=x.id?"&intlink_id="+encodeURIComponent(x.id):"",v=x.linktrack?"&"+x.linktrack:"",r=p.linkLocation?"&link_location="+encodeURIComponent(p.linkLocation):"",q=t+u+y+v+r;h(j,q,b);e.notify(s,"cookiecreated.istats",w)};function Q(q,u,r,s){var p=s.altKey||s.ctrlKey||s.metaKey||s.shiftKey,t=function(){};if(!p){t=function(){if(e.notify(u,"redirect.istats",s)!==false){window.location.href=r.href}}}clearTimeout(S);S=setTimeout(function(){e.notify(u,"trackingfail.istats",s);t()},f);R(q,function(){clearTimeout(S);if(e.notify(u,"trackingsuccess.istats",s)!==false){t()}},s);if(!p){if(s.preventDefault){s.preventDefault()}else{event.returnValue=false}}}function R(q,s,r){var p;q+="&ns__t="+(new Date().getTime());q+="&ns_jspageurl="+escape(location&&location.href?location.href:document.URL);if(r&&r.istats.linkTrackerUrl){r.istats.linkTrackerUrl=q}p=new Image();if(typeof s==="function"){p.onload=function(){s()}}C.url=q;p.src=q}function I(p){if(typeof p[o]!=="undefined"){return }p[o]={eventsKey:d.length,linkTypesTracked:{}};d.push(a())}function h(p,v,r){var s=new Date(),u=365*24*60*60*1000,x=window.location.host,t,w,q;if(typeof r==="undefined"){r=u}s.setTime(s.getTime()+r);w="; expires="+s.toGMTString();t=Y(x);q=p+"="+encodeURIComponent(v)+w+"; domain="+t+"; path=/";document.cookie=q;return q}function c(r){var u=r+"=",t=document.cookie.split(";"),q;for(var s=0,p=t.length;s<p;s++){q=t[s];while(q.charAt(0)===" "){q=q.substring(1,q.length)}if(q.indexOf(u)===0){return decodeURIComponent(q.substring(u.length,q.length))}}return null}function T(p){if(c(p)!==null){h(p,"",-1)}}function G(){var p;if(!Z()&&typeof H!=="string"){return }p=K()||A();if(p){R(H+"&"+p);(L())._linkTracked=true}}if(typeof require.ready==="function"){require.ready(G)}else{require(["domReady"],function(p){p(G)})}return i});